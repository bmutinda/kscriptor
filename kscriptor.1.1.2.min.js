/**
 * kscriptor.js.min 
 * version 1.1.2
 *
 * By Mutinda Boniface @2012 - mutinda.rebmos.com
 */
(function(){var a=window.document;trim=String.prototype.trim;var b={version:"1.1.2",build:"111",date:"Sun March / 08 / 2012 08:11 A.M",developer:"Mutinda Boniface",_helper:null,_browser:null,_elements:[],_current_element:null,error:null,_required_selectors:"#,.,!".split(","),_required_selector_length:0,_found_selector_index:0,_id_selector_index:0,_class_selector_index:1,_tagname_selector_index:2,initialize:function(){this._helper=b.helper;this._browser=b.browser;this._browser.init();this._helper.init();this._required_selector_length=this._required_selectors.length},ready:function(a){b.fn.ready(a);b.initialize()},elem:function(){for(var a=0;a<arguments.length;a++){if(this._selector(arguments[a])){this._determineSelector(arguments[a]);this._setSelector(this._found_selector_index)}}return this},byid:function(){var b=[];for(var c=0;c<arguments.length;c++){if(this._helper._isString(this._current_element)){b.push(a.getElementById(this._current_element))}}this._elements=b},byclass:function(b,c,d){var e=[];var f=new RegExp("(^| )"+b+"( |$)");var g=(d||a).getElementsByTagName(c||"*");for(var h=0;h<g.length;h++){if(f.test(g[h].className)){e.push(g[h])}}this._elements=e},byTagName:function(){var b=[];for(var c=0;c<arguments.length;c++){if(this._helper._isString(arguments[c])){var d=a.getElementsByTagName(arguments[c]).length;for(var e=0;e<d;e++){b.push(a.getElementsByTagName(arguments[c][e]))}}}this._elements=b},_selector:function(a){return b.helper._isString(a)?this._helper.trim(a).length!==0?true:false:false},_determineSelector:function(a){this._current_element=this._helper.trim(a);var b=this._current_element.charAt(0);var c=false;for(var d=0;d<this._required_selector_length;d++){c=b===this._required_selectors[d]?true:false;if(c){this._found_selector_index=d;break}else{continue}}},_setSelector:function(a){this._updateCurrentElement();switch(a){case this._id_selector_index:this.byid(this._current_element);break;case this._class_selector_index:this.byclass(this._current_element);break;case this._tagname_selector_index:this.byTagName(this._current_element);break;default:this.error="Incorrect selectors specified... use #id_name, .class_name, !tagname";break}},_updateCurrentElement:function(){var a=this._current_element.length;this._current_element=this._current_element.substring(1,a)},addClass:function(a){for(var b=0;b<this._elements.length;b++){this._elements[b].className+=""+a}return this},bind:function(a,c){b.events.bind(a,c)},submit:function(){},click:function(){},over:function(){},html:function(a){for(var b=0;b<this._elements.length;b++){this._elements[b].innerHTML=a}},val:function(){for(var a=0;a<this._elements.length;a++){return this._elements[a].value}},kajax:function(a){b.ajax.init(a)},css:function(a){for(var b=0;b<this._elements.length;b++){for(css_style in a){this._elements[b].style[css_style]=a[css_style]}}return this},validate:function(a){a.form?b.kValidator.init(a):alert("No form defined ")},checkMail:function(a){var b=/^[a-z0-9_+.-]+\@([a-z0-9-]+\.)+[a-z0-9]{2,4}$/i;var c=this._helper.trim(a);return!c||/^[a-z0-9_+.-]+\@([a-z0-9-]+\.)+[a-z0-9]{2,4}$/i.test(c)},checkPhone:function(a){},checkNumber:function(a){},checkDate:function(a){},checkUrl:function(a){}};b.events=b.prototype={parent:b,bind:function(a,b){var c=this.parent._helper.trim(a);this.parent._helper._isString(c)==true?c==""||c==null?this.error="on "+c+" Could not be binded ":this._registerEvent(c,b):this.error="on "+c+" Could not be binded"},submit:function(){},_registerEvent:function(a,b){if(this.parent._elements[0].addEventListener){for(var c=0;c<this.parent._elements.length;c++){this.parent._elements[c].addEventListener(a,b,false)}}if(this.parent._elements[0].attachEvent){for(var c=0;c<this.parent._elements.length;c++){this.parent._elements[c].attachEvent("on"+a,b)}}}};b.helper=b.prototype={self:b.helper,parent:b,init:function(){leftTrim=/^\s+/;rightTrim=/\s+$/},trim:function(a){if(a&&a!="undefined"){return a.replace(self.leftTrim,"").replace(self.rightTrim,"")}else{return null}return this},_parType:function(a){return Object.prototype.toString.call(a)},_isArray:function(a){return Object.prototype.toString.call(a)==="[object Array]"?true:false},_isNumber:function(a){return Object.prototype.toString.call(a)==="[object Number]"?true:false},_isString:function(a){return Object.prototype.toString.call(a)==="[object String]"?true:false},_isFloat:function(a){},_isHTMLobject:function(a){var b=new String(Object.prototype.toString.call(a));return b.substring(0,12)},_stringToLower:function(a){return this._isString(a)?a.toLowerCase():a},_stringToUpper:function(a){return this._isString(a)?a.toUppercase():a}};b.string=b.prototype={charAt:function(a){return 11}};b.kValidator=b.prototype={version:"1.0.0",revision:"0.0",developer:"Mutinda Boniface",release_date:"14th June 2012 14:10pm",finished_validation:false,ruleRegex:/^(.+)\[(.+)\]$/,numericRegex:/^[0-9]+$/,integerRegex:/^\-?[0-9]+$/,decimalRegex:/^\-?[0-9]*\.?[0-9]+$/,emailRegex:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i,alphaRegex:/^[a-z]+$/i,alphaNumericRegex:/^[a-z0-9]+$/i,alphaDashRegex:/^[a-z0-9_-]+$/i,naturalRegex:/^[0-9]+$/i,naturalNoZeroRegex:/^[1-9][0-9]*$/i,ipRegex:/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,base64Regex:/[^a-zA-Z0-9\/\+=]/i,form_name:null,form_fields:[],form_field_rules_required:"email,required,int,number,float,ip,min,max,decimal".split(","),form_field_rules_required_length:0,form_errors:[],form_callback:null,validate_lib_errors:[],parent:b,message_hooks:{valid_ip:"_0 field should contain a valid ip address",valid_email:"_0 field should be a valid email address",valid_number:"_0 field should contain natural numbers",valid_alpha:"_0 field should contain alphabetical letters",valid_required:"_0 field is required ",valid_int:"_0 field should contain digits",valid_decimal:"_0 field should contain digits"},init:function(c){this.form_errors=[];this.form_field_rules_required_length=this.form_field_rules_required.length;var d=0;var e=null;var f=[];if(c.success&&typeof c.success==="function"){this.form_callback=c.success}c.form?this.form_name=a.forms[c.form]:this.registerError("lib"," no form defined");this.form_name.onsubmit=function(){if(b.kValidator.form_errors.length>0){return false}else{b.kValidator.form_name.submit}};if(this.form_name&&this.form_name!="undefined"){if(c.fields){var g=null;if(typeof c.fields=="object"){d=c.fields.length;if(d>0){for(var h=0;h<d;h++){e=this.parent._helper.trim(c.fields[h].name);g=this.parent._helper.trim(c.fields[h].rules);if(e&&e!=""){if(this._elementExistsInForm(e)){f=this._elementRulesDefined(g);this.doValidate(e,f)}else{this.registerError("lib",e+" cannot be found in your form")}}else{this.registerError("lib"," field name left blank form")}}this.finished_validation=true;this.startCallback()}else{this.registerError("lib","No fields defined for validation")}}else{this.registerError("lib","No fields defined for validation")}}else{this.registerError("lib","No fields defined for validation");return false}}else{this.registerError("lib","Please setup your form name to continue.......");alert("Please setup your form name to continue.......")}},_elementExistsInForm:function(a){return null||this.form_name[a]},_elementRulesDefined:function(a){var b=this.parent._helper.trim(a);if(b&&b!=""){return this._splitFieldRules(b)}},_splitFieldRules:function(a){var b=new String(this.parent._helper.trim(a)),c=0,d=[];if(b&&b!=""&&b.length!=0){var e=b.split(",");var f=null;c=e.length;for(var g=0;g<c;g++){f=this.parent._helper._stringToLower(e[g]);this._isValidRule(f)?d.push(f):this.registerError("lib","Inccorrect rule defined .."+e[g])}}return d},_isValidRule:function(a){var b=false;for(var c=0;c<this.form_field_rules_required_length;c++){if(this.form_field_rules_required[c]==a){b=true;break}}return b},_registerFieldRule:function(a){a?field_rules.push(a):false},_extractErrorMessage:function(a,b){var c=null,d=this.message_hooks,e="valid_"+this.parent._helper.trim(b);c=d[e].replace("_0",a.name);this._logFormError(c)},_logFormError:function(a){this.form_errors.push(a)},registerError:function(a,b){if(a&&a!="undefined"&&b&&b!="undefined"){var c=a.toLowercase;switch(c){case"lib":this.validate_lib_errors.push(b);break;case"validate":this.form_errors.push(b);break;default:return false}}},doValidate:function(a,b){if(b&&b.length!=0&&b!="undefined"){for(var c=0,d=b.length;c<d;c++){var e=b[c];ready_to_call_f_char=e.substr(0,1).toUpperCase(),rule_callback_name="is"+ready_to_call_f_char+e.substr(1,e.length);switch(this.parent._helper.trim(b[c])){case"email":this.isMail(this.form_name[a])?false:this._extractErrorMessage(this.form_name[a],"email");break;case"required":this.isRequired(this.form_name[a])?false:this._extractErrorMessage(this.form_name[a],"required");break;case"ip":this.isIp(this.form_name[a])?false:this._extractErrorMessage(this.form_name[a],"ip");break;case"decimal":this.isDecimal(this.form_name[a])?false:this._extractErrorMessage(this.form_name[a],"decimal");break;case"number":this.isNumber(this.form_name[a])?false:this._extractErrorMessage(this.form_name[a],"number");break}}}},startCallback:function(){this.finished_validation?this.form_callback(this.form_errors):false},isMail:function(a){return this.emailRegex.test(a.value)},isUrl:function(a){},isPhone:function(a){},isInt:function(a){return this.integerRegex.test(a.value)},isAlpha:function(a){return this.alphaRegex.test(a.value)},isIp:function(a){return this.ipRegex.test(a.value)},isDecimal:function(a){return this.decimalRegex.test(a.value)},isNumber:function(a){return this.naturalRegex.test(a.value)},isRequired:function(a){if(a&&a!="undefined"){var b=a.value;var c=b?this.parent._helper.trim(b).length:0;return c<=0?false:true}},_errorMessages:function(){}};b.browser=b.prototype={init:function(){rwebkit=/(webkit)[ \/]([\w.]+)/;ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/;rmsie=/(msie) ([\w.]+)/;rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/;userAgent=navigator.userAgent},agentMatch:function(){}};b.ajax=b.prototype={constructor:b,init:function(a){alert(a.Type)}};b.fn=b.prototype={constructor:b,ready:function(b){window.addEventListener?a.addEventListener("DOMContentLoaded",b,false):window.attachEvent("onload",b)},bindReady:function(){},cleanup:function(){if(a.addEventListener){DOMContentLoaded=function(){a.removeEventListener("DOMContentLoaded",DOMContentLoaded,false)}}else if(a.attachEvent){DOMContentLoaded=function(){a.readyState==="complete"?a.detachEvent("onreadystatechange",DOMContentLoaded,false):false;window.detachEvent("onload",DOMContentLoaded)}}}};trim=trim?function(a){}:function(a){constructor=b.helper};if(!window._ks){window._ks=b}})()